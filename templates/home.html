{% extends 'base.html' %}

{% block title %}Home | Adrija Tours & Travels{% endblock %}

{% block content %}
    <div class="relative">
        <div id="my-keen-slider" class="keen-slider" style="height: 600px;">
            {% for destination in featured_destinations %}
                <div class="keen-slider__slide">
                    <img src="{{ destination.image.url }}" alt="{{ destination.name }}"
                         class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center">
                        <div class="text-center text-white">
                            <h1 class="text-4xl md:text-6xl font-bold">{{ destination.name }}</h1>
                            <p class="mt-4 text-lg md:text-xl">{{ destination.country }}</p>
                            <a href="{% url 'destination_detail' destination.slug %}"
                               class="mt-8 inline-block bg-green-500 text-white font-bold py-3 px-6 rounded hover:bg-green-600 transition duration-300">Explore</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-8">Featured Hotels</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for hotel in featured_hotels %}
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                        <img src="{{ hotel.image.url }}" alt="{{ hotel.name }}" class="w-full h-56 object-cover">
                        <div class="p-6">
                            <h3 class="text-xl font-bold">{{ hotel.name }}</h3>
                            <p class="text-gray-600">{{ hotel.city }}, {{ hotel.country }}</p>
                            <div class="mt-4 flex justify-between items-center">
                                <span class="text-lg font-bold">${{ hotel.price_per_night }} / night</span>
                                <a href="{% url 'hotel_detail' hotel.slug %}"
                                   class="text-green-500 hover:text-green-600 font-semibold">View Details</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    var slider = new KeenSlider("#my-keen-slider", {
    loop: true,
    }, [
    (slider) => {
    let timeout
    let mouseOver = false
    function clearNextTimeout() {
    clearTimeout(timeout)
    }
    function nextTimeout() {
    clearTimeout(timeout)
    if (mouseOver) return
    timeout = setTimeout(() => {
    slider.next()
    }, 2000)
    }
    slider.on("created", () => {
    slider.container.addEventListener("mouseover", () => {
    mouseOver = true
    clearNextTimeout()
    })
    slider.container.addEventListener("mouseout", () => {
    mouseOver = false
    nextTimeout()
    })
    nextTimeout()
    })
    slider.on("dragStarted", clearNextTimeout)
    slider.on("animationEnded", nextTimeout)
    slider.on("updated", nextTimeout)
    },
    ])
{% endblock %}
